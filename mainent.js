const a=initializeApp;const b=getAuth;const c=createUserWithEmailAndPassword;const d=signInWithEmailAndPassword;const e=updateProfile;const f=getFirestore;const g=collection;const h=addDoc;const i=onSnapshot;const j=getDocs;const k=query;const l=where;const m=orderBy;const n=deleteDoc;const o=doc;const p=updateDoc;const q=increment;const r=await fetch("/.netlify/functions/verifyFb");const s=await r.json();const t=a(s);const u=b(t);const v=f(t);const w=g(v,"points");const x=document.getElementById("signup-form");const y=document.getElementById("errorMessage");x.addEventListener("submit",async z=>{z.preventDefault();const A=document.getElementById("fullname").value.trim();const B=document.getElementById("signup-email").value;const C=document.getElementById("signup-password").value;try{const D=await c(u,B,C);const E=D.user;await e(E,{displayName:A});y.style.color="green";y.innerHTML="&#x2705; Account created successfully!";console.log("User created:",E);initPoints();x.reset();setTimeout(()=>{window.location.href="/index.html"},2000)}catch(F){y.style.color="red";y.innerHTML=F.message}});const G=document.getElementById("login-form");G.addEventListener("submit",async H=>{H.preventDefault();const I=document.getElementById("login-email").value;const J=document.getElementById("login-password").value;try{const K=await d(u,I,J);const L=K.user;alert("&#x2705; Login successful! Welcome "+L.email);window.location.href="/index.html"}catch(M){alert("&#x274C; "+M.message)}});window.initPoints=async function N(){if(document.querySelector("#referEm")){const O=document.getElementById("referEm").value.trim();try{const P=k(w,l("emailAdd","==",O));const Q=await j(P);let R;if(Q.empty){const S=await h(w,{emailAdd:O,points:2,claimed:!1,createdAt:Date.now()});R={id:S.id,points:2}}else{const T=Q.docs[0];R={id:T.id,...T.data()};const U=o(v,"points",R.id);await p(U,{points:(R.points||0)+2});R.points=(R.points||0)+2}}catch(V){console.error("Error initializing points:",V)}}else{console.log("not found.")}}
